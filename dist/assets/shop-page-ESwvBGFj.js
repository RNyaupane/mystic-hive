import{j as s,b as w,u as f,P as C,L as g,p as _,y as N,i as $,k as P,m as S,r as b,h as k}from"./index-Dtn4P0od.js";import{E as A}from"./empty-content-DgwRklq6.js";const v=({title:l,children:r})=>s.jsx("div",{className:"filter-item",children:s.jsxs("div",{className:"shop-filter-item",children:[s.jsx("h2",{children:l}),r]})}),m=({items:l,name:r,handlePriceRangeChange:h})=>s.jsx("ul",{children:l.map((n,d)=>s.jsx("li",{children:s.jsxs("label",{className:"topcoat-radio-button__label",children:[n.label,s.jsx("input",{type:"radio",name:r,onChange:()=>h(n.min,n.max)}),s.jsx("span",{className:"topcoat-radio-button"})]})},d))}),F=({searchValue:l,onSearchChange:r,setSelectedPriceRange:h,selectedPriceRange:n})=>{const d=[{label:"All prices",min:null,max:null},{label:"$50 – $100",min:50,max:100},{label:"$100 – $200",min:100,max:200},{label:"$200 – $300",min:200,max:300},{label:"$300 – $400",min:300,max:400},{label:"$400 and more",min:400,max:null}],t=[{label:"500 ml"},{label:"1 Liter"}];Array.from({length:7},(a,i)=>({value:30}));const p=[{label:"Flower"},{label:"Hill"},{label:"Forest"},{label:"Queen"}],o=(a,i)=>{h({min:a,max:i})};return s.jsx("div",{className:"col-lg-4",children:s.jsxs("div",{className:"shop-filter-wrap",children:[s.jsx(v,{title:"Search",children:s.jsx("div",{className:"shop-filter-search",children:s.jsx("form",{children:s.jsxs("div",{children:[s.jsx("input",{type:"text",className:"form-control",placeholder:"Search",value:l,onChange:r}),s.jsx("button",{type:"submit",children:s.jsx("i",{className:"ti-search"})})]})})})}),s.jsx(v,{title:"Price",children:s.jsx(m,{items:d,name:"topcoat",handlePriceRangeChange:o})}),s.jsx(v,{title:"Size",children:s.jsx(m,{items:t,name:"topcoat2"})}),s.jsx(v,{title:"Category",children:s.jsx(m,{items:p,name:"topcoat3"})})]})})},L=({products:l,isLoading:r,onSortChange:h})=>{const n=w(),{id:d}=f(a=>a.cart),{items:t}=f(a=>a==null?void 0:a.wishlist),p=async a=>{if(d)try{const i=await _.addItemToCart({product_id:a,quantity:1},d);((i==null?void 0:i.status)===201||(i==null?void 0:i.status)===200)&&(N.success("Added Item to cart"),n($(d)))}catch(i){N.error("Add to cart Failed"),console.error(i)}else n(P({product_id:a,quantity:1}))},o=a=>{n(S({id:a})),setTimeout(()=>{N.success("Added To Wishlist")},400)};return r?s.jsx(C,{}):s.jsxs("div",{className:"col-lg-8",children:[s.jsxs("div",{className:"shop-section-top-inner",children:[s.jsx("div",{className:"shoping-list",children:s.jsxs("ul",{className:"nav nav-mb-3 main-tab",id:"tab",role:"tablist",children:[s.jsx("li",{className:"nav-item",role:"presentation",children:s.jsx("button",{className:"nav-link active",id:"grid-tab","data-bs-toggle":"pill","data-bs-target":"#grid",type:"button",role:"tab","aria-controls":"grid","aria-selected":"true",children:s.jsx("i",{className:"fa fa-th "})})}),s.jsx("li",{className:"nav-item",role:"presentation",children:s.jsx("button",{className:"nav-link",id:"list-tab","data-bs-toggle":"pill","data-bs-target":"#list",type:"button",role:"tab","aria-controls":"list","aria-selected":"false",children:s.jsx("i",{className:"fa fa-list "})})})]})}),s.jsx("div",{className:"short-by",children:s.jsxs("ul",{children:[s.jsx("li",{children:"Sort By :"}),s.jsx("li",{children:s.jsxs("select",{name:"sort",onChange:h,children:[s.jsx("option",{value:"date-posted",children:"Date posted"}),s.jsx("option",{value:"price-high-low",children:"Price high-low"}),s.jsx("option",{value:"price-low-high",children:"Price low-high"})]})})]})})]}),s.jsxs("div",{className:"tab-content",children:[s.jsx("div",{className:"tab-pane fade show active",id:"grid",role:"tabpanel","aria-labelledby":"grid-tab",children:s.jsx("div",{className:"product-wrap",children:s.jsx("div",{className:"row align-items-center",children:(l==null?void 0:l.length)>0?l==null?void 0:l.map((a,i)=>{var x,e;return s.jsx("div",{className:"col-xl-4 col-lg-6 col-md-6 col-sm-12 col-12",children:s.jsxs("div",{className:"product-item",children:[s.jsxs("div",{className:"product-img",children:[s.jsx("img",{src:((e=(x=a==null?void 0:a.images)==null?void 0:x[0])==null?void 0:e.image)||"/assets/img/product/default-product.png",alt:"Product Image"}),s.jsxs("ul",{children:[s.jsx("li",{children:s.jsx("a",{style:{cursor:"pointer"},"data-bs-toggle":"tooltip","data-bs-html":"true",title:"Add to Cart",onClick:()=>p(a==null?void 0:a.id),children:s.jsx("i",{className:"fi flaticon-shopping-cart"})})}),s.jsx("li",{"data-bs-toggle":"modal","data-bs-target":"#popup-quickview",children:s.jsx(g,{to:`/product/${a==null?void 0:a.id}`,"data-bs-toggle":"tooltip","data-bs-html":"true",title:"Quick View",children:s.jsx("i",{className:"fi ti-eye"})})}),s.jsx("li",{children:s.jsx("a",{"data-bs-toggle":"tooltip","data-bs-html":"true",className:"cursor-pointer",title:"Add to Wishlist",onClick:()=>o(a==null?void 0:a.id),children:s.jsx("i",{className:"fi flaticon-like",style:{color:t!=null&&t.some(c=>c.id===(a==null?void 0:a.id))?"#910000":""}})})})]}),s.jsx("div",{className:"offer-thumb",children:s.jsx("span",{children:"-28%"})})]}),s.jsxs("div",{className:"product-content",children:[s.jsx("h3",{children:s.jsx(g,{to:`/product/${a==null?void 0:a.id}`,children:a==null?void 0:a.name})}),s.jsxs("div",{className:"product-btm",children:[s.jsx("div",{className:"product-price",children:s.jsxs("ul",{children:[s.jsxs("li",{children:["$",a==null?void 0:a.unit_price]}),s.jsx("li",{})]})}),s.jsx("div",{className:"product-ratting",children:s.jsx("ul",{children:[...Array(5)].map((c,j)=>s.jsx("li",{children:s.jsx("i",{className:`fa ${j<(a==null?void 0:a.average_rating)?"fa-star":"fa-star-o"}`,"aria-hidden":"true"})},j))})})]})]})]})},i)}):s.jsx(A,{})})})}),s.jsx("div",{className:"tab-pane fade product-list",id:"list",role:"tabpanel","aria-labelledby":"list-tab",children:s.jsx("div",{className:"product-wrap",children:s.jsx("div",{className:"row align-items-center",children:(l==null?void 0:l.length)>0&&(l==null?void 0:l.map((a,i)=>{var x,e,c;return s.jsx("div",{className:"col-xl-12 col-12",children:s.jsxs("div",{className:"product-item",children:[s.jsxs("div",{className:"product-img",style:{minHeight:"100%"},children:[s.jsx("div",{className:"",style:{height:"100%",objectFit:"cover",width:"200px"},children:s.jsx("img",{src:((e=(x=a==null?void 0:a.images)==null?void 0:x[0])==null?void 0:e.image)||"/assets/img/product/default-product.png",alt:"Product Image"})}),s.jsxs("ul",{children:[s.jsx("li",{children:s.jsx("a",{"data-bs-toggle":"tooltip","data-bs-html":"true",style:{cursor:"pointer"},title:"Add to Cart",onClick:()=>p(a==null?void 0:a.id),children:s.jsx("i",{className:"fi flaticon-shopping-cart"})})}),s.jsx("li",{"data-bs-toggle":"modal","data-bs-target":"#popup-quickview",children:s.jsx(g,{to:`/product/${a==null?void 0:a.id}`,"data-bs-toggle":"tooltip","data-bs-html":"true",title:"Quick View",children:s.jsx("i",{className:"fi ti-eye"})})}),s.jsx("li",{children:s.jsx("a",{"data-bs-toggle":"tooltip","data-bs-html":"true",title:"Add to Wishlist",onClick:()=>o(a==null?void 0:a.id),children:s.jsx("i",{className:"fi flaticon-like"})})})]}),s.jsx("div",{className:"offer-thumb",children:s.jsx("span",{children:"-28%"})})]}),s.jsxs("div",{className:"product-content",style:{minHeight:"250px"},children:[s.jsx("h3",{children:s.jsx(g,{to:`/product/${a==null?void 0:a.id}`,children:a==null?void 0:a.name})}),s.jsxs("div",{className:"product-btm",children:[s.jsx("div",{className:"product-price",children:s.jsxs("ul",{children:[s.jsxs("li",{children:["$",a==null?void 0:a.unit_price]}),s.jsx("li",{})]})}),s.jsx("div",{className:"product-ratting",children:s.jsx("ul",{children:[...Array(5)].map((j,u)=>s.jsx("li",{children:s.jsx("i",{className:`fa ${u<(a==null?void 0:a.average_rating)?"fa-star":"fa-star-o"}`,"aria-hidden":"true"})},u))})})]}),s.jsxs("p",{className:"product-description",children:[" ",((c=a==null?void 0:a.description)==null?void 0:c.length)>150?`${a.description.slice(0,150)}...`:a==null?void 0:a.description]}),s.jsx("div",{className:"",style:{display:"flex",alignItems:"center",justifyContent:"end"},children:s.jsx(g,{to:`/product/${a==null?void 0:a.id}`,className:"btn theme-btn",tabIndex:"0",style:{padding:"5px 30px",textTransform:"capitalize"},children:"View"})})]})]})},i)}))})})})]})]})},I=()=>{const l=w(),[r,h]=b.useState(""),[n,d]=b.useState(""),[t,p]=b.useState(null);b.useEffect(()=>{l(k())},[l]);const{products:o=[],isLoading:a}=f(e=>e.product),x=[...o==null?void 0:o.filter(e=>{var u,y;const c=(y=(u=e==null?void 0:e.name)==null?void 0:u.toLowerCase())==null?void 0:y.includes(r==null?void 0:r.toLowerCase()),j=!t||t.min===null&&t.max===null||(t.max===null?parseFloat(e.unit_price)>=t.min:parseFloat(e.unit_price)>=t.min&&parseFloat(e.unit_price)<=t.max);return c&&j})].sort((e,c)=>{switch(n){case"date-posted":return new Date(c.created_at)-new Date(e.created_at);case"price-high-low":return parseFloat(c.unit_price)-parseFloat(e.unit_price);case"price-low-high":return parseFloat(e.unit_price)-parseFloat(c.unit_price);default:return 0}});return console.log(o),console.log(t),s.jsx("div",{className:"shop-section",children:s.jsx("div",{className:"container",children:s.jsxs("div",{className:"row",children:[s.jsx(F,{searchValue:r,onSearchChange:e=>h(e.target.value),selectedPriceRange:t,setSelectedPriceRange:p}),s.jsx(L,{products:x,isLoading:a,onSortChange:e=>d(e.target.value)})]})})})},V=()=>s.jsx("div",{children:s.jsx(I,{})});export{V as default};
