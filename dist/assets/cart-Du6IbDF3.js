import{u,r as p,b as m,j as s,S as F,L as j,p as q,i as N}from"./index-Dtn4P0od.js";import{E as P}from"./empty-content-DgwRklq6.js";const S=()=>{const{items:i,isLoading:r,id:l}=u(e=>e.cart),[t,g]=p.useState(i||[]),b=m(),y=(e,a)=>{g(c=>c.map(d=>d.id===e?{...d,quantity:a}:d))},f=async()=>{var e;for(const a of t)try{const c=await q.updateItemToCart({quantity:a==null?void 0:a.quantity},l,(e=a==null?void 0:a.product)==null?void 0:e.id)}catch(c){console.error(c)}b(N(l))},v=t.reduce((e,a)=>e+a.quantity,0),n=t.reduce((e,a)=>e+parseFloat(a.product.unit_price)*a.quantity,0),o=n*.02,h=100,x=100,C=n+o+h+x;return s.jsx("div",{className:"cart-area section-padding",children:s.jsx("div",{className:"container",children:s.jsx("div",{className:"form",children:s.jsx("div",{className:"cart-wrapper",children:s.jsx("div",{className:"row",children:s.jsxs("div",{className:"col-12",children:[s.jsx("form",{action:"#",children:s.jsxs("table",{className:"table-responsive cart-wrap",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"images images-b",children:"Image"}),s.jsx("th",{className:"product-2",children:"Product Name"}),s.jsx("th",{className:"pr",children:"Quantity"}),s.jsx("th",{className:"ptice",children:"Price"}),s.jsx("th",{className:"stock",children:"Total Price"}),s.jsx("th",{className:"remove remove-b",children:"Action"})]})}),r?s.jsx("tbody",{children:s.jsx("tr",{children:s.jsx("td",{colSpan:6,children:s.jsx(F,{title:"Loading Cart Items"})})})}):s.jsx("tbody",{children:(t==null?void 0:t.length)>0?t==null?void 0:t.map(e=>{var a;return s.jsxs("tr",{children:[s.jsx("td",{className:"images",children:s.jsx("img",{src:((a=e.product.images.find(c=>c.is_primary))==null?void 0:a.image)||"/assets/img/product/default-product.png",alt:e.product.name,style:{maxWidth:"100px"}})}),s.jsx("td",{className:"product",children:s.jsxs("ul",{children:[s.jsx("li",{className:"first-cart",children:e.product.name}),s.jsxs("li",{children:["Brand: ",e.product.brand||"N/A"]})]})}),s.jsx("td",{className:"stock",children:s.jsx("ul",{className:"input-style",children:s.jsx("li",{className:"quantity cart-plus-minus",children:s.jsx("input",{type:"number",value:e.quantity,onChange:c=>y(e.id,parseInt(c.target.value)||1),min:"1"})})})}),s.jsxs("td",{className:"ptice",children:["$",parseFloat(e.product.unit_price).toFixed(2)]}),s.jsxs("td",{className:"stock",children:["$",(parseFloat(e.product.unit_price)*e.quantity).toFixed(2)]}),s.jsx("td",{className:"action",children:s.jsx("ul",{children:s.jsx("li",{className:"w-btn",children:s.jsx("a",{"data-bs-toggle":"tooltip","data-bs-html":"true",title:"Remove from Cart",href:"#",children:s.jsx("i",{className:"fi flaticon-delete"})})})})})]},e.id)}):s.jsx("tr",{children:s.jsx("td",{colSpan:6,children:s.jsx(P,{title:"No items in Cart"})})})})]})}),s.jsx("div",{className:"submit-btn-area",children:s.jsxs("ul",{children:[s.jsx("li",{children:s.jsxs(j,{className:"theme-btn",to:"/shop",children:["Continue Shopping"," ",s.jsx("i",{className:"fa fa-angle-double-right"})]})}),s.jsx("li",{children:s.jsx("button",{type:"button",onClick:f,children:"Update Cart"})})]})}),s.jsx("div",{className:"cart-product-list",children:s.jsxs("ul",{children:[s.jsxs("li",{children:["Total product",s.jsxs("span",{children:["(",v,")"]})]}),s.jsxs("li",{children:["Sub Price",s.jsxs("span",{children:["$",n.toFixed(2)]})]}),s.jsxs("li",{children:["Vat",s.jsxs("span",{children:["$",o.toFixed(2)]})]}),s.jsxs("li",{children:["Eco Tax",s.jsxs("span",{children:["$",h.toFixed(2)]})]}),s.jsxs("li",{children:["Delivery Charge",s.jsxs("span",{children:["$",x.toFixed(2)]})]}),s.jsxs("li",{className:"cart-b",children:["Total Price",s.jsxs("span",{children:["$",C.toFixed(2)]})]})]})}),s.jsx("div",{className:"submit-btn-area",children:s.jsx("ul",{children:s.jsx("li",{children:s.jsxs(j,{className:"theme-btn",to:"/checkout",children:["Proceed to Checkout"," ",s.jsx("i",{className:"fa fa-angle-double-right"})]})})})})]})})})})})})},$=()=>{const i=m(),{id:r}=u(l=>l.cart);return p.useEffect(()=>{r&&i(N(r))},[i,r]),s.jsx(s.Fragment,{children:s.jsx(S,{})})};export{$ as default};
