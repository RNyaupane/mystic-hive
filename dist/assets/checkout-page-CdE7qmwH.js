import{u as N,j as s,s as u,r as n,y as f}from"./index-Cuo50Cr3.js";const C=()=>{const{items:a}=N(c=>c.cart),d=a.reduce((c,e)=>c+parseFloat(e.sub_total),0),r=d*.1,i=100,t=100,o=d+r+i-t;return s.jsx("div",{className:"col-lg-4 col-12",children:s.jsx("div",{className:"cout-order-area",children:s.jsx("div",{className:"oreder-item",children:s.jsxs("ul",{children:[s.jsxs("li",{className:"o-header",children:["Your Order",s.jsxs("span",{children:["(",a.length,")"]})]}),a.map((c,e)=>s.jsxs("li",{children:[c.product.name," X ",c.quantity,s.jsx("span",{children:parseFloat(c.sub_total).toFixed(2)})]},e)),s.jsxs("li",{className:"s-total",children:["Sub Total",s.jsx("span",{children:d.toFixed(2)})]}),s.jsxs("li",{children:["( + ) VAT",s.jsx("span",{children:r.toFixed(2)})]}),s.jsxs("li",{children:["( + ) Eco Tax",s.jsx("span",{children:i.toFixed(2)})]}),s.jsxs("li",{children:["( - ) Discount Price",s.jsx("span",{children:t.toFixed(2)})]}),s.jsxs("li",{className:"o-bottom",children:["Total price",s.jsx("span",{children:o.toFixed(2)})]})]})})})})},A={getProfile:()=>u.get("auth/profile/me/",{}),getAddress:()=>u.get("auth/address/")},F=({address:a=[],addLoad:d=!1,activeAccordion:r,toggleAccordion:i,isNewAdd:t,setIsNewAdd:o,setSelectedAddress:c})=>s.jsx("div",{className:"caupon-wrap s2",children:s.jsxs("div",{className:"biling-item",children:[s.jsx("div",{className:`coupon coupon-3 ${r.address?"accordian-border-top":" accordian-border-left "}`,onClick:()=>i("address"),children:s.jsx("label",{id:"toggle2",children:"Billing Address"})}),r.address&&s.jsxs("div",{className:"billing-adress",id:"open2",children:[s.jsx("div",{className:"contact-form form-style",children:s.jsx("div",{className:"row",children:s.jsxs("div",{className:"col-lg-12 col-md-12 col-12",children:[d?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"spinner-border spinner-border-sm mx-2",role:"status","aria-hidden":"true"}),s.jsx("label",{htmlFor:"Country",children:"Loading Address"})]}):s.jsx("label",{htmlFor:"Country",children:"Select Your Address"}),s.jsxs("select",{name:"address",id:"address",defaultValue:0,onChange:e=>c(e.target.value),className:"form-control",children:[s.jsx("option",{disabled:!0,value:0,children:"Select Address"}),!d&&a.length>0?a==null?void 0:a.map((e,h)=>s.jsx("option",{className:"py-4 my-3",value:e==null?void 0:e.id,children:`${e.address_line1}, ${e.address_line2?e.address_line2+", ":""}${e.city}, ${e.state}, ${e.country} - ${e.postal_code}`},h)):s.jsx("option",{children:"No Address"})]})]})})}),s.jsxs("div",{className:"biling-item-2",children:[s.jsx("input",{id:"toggle3",type:"checkbox",checked:t,onChange:()=>{},onClick:()=>o(!t)}),s.jsx("label",{className:"fontsize ps-2 cursor-pointer",htmlFor:"toggle3",children:"Ship to a different address?"}),t&&s.jsx("div",{className:"billing-adress",children:s.jsx("div",{className:"contact-form form-style",children:s.jsxs("div",{className:"row",children:[s.jsxs("div",{className:"col-lg-6 col-md-12 col-12",children:[s.jsx("label",{htmlFor:"Country",children:"Country"}),s.jsxs("select",{name:"address",id:"Country",className:"form-control",children:[s.jsx("option",{disabled:"",children:"United State"}),s.jsx("option",{children:"Bangladesh"}),s.jsx("option",{children:"India"}),s.jsx("option",{children:"Srilanka"}),s.jsx("option",{children:"Pakisthan"}),s.jsx("option",{children:"Afgansthan"})]})]}),s.jsxs("div",{className:"col-lg-6 col-md-12 col-12",children:[s.jsx("label",{htmlFor:"district",children:"Dristrict"}),s.jsx("input",{type:"text",placeholder:"",id:"district",name:"district"})]}),s.jsxs("div",{className:"col-lg-6 col-md-12 col-12",children:[s.jsx("label",{htmlFor:"postalCode",children:"Post Code"}),s.jsx("input",{type:"text",placeholder:"",id:"postalCode",name:"postalCode"})]}),s.jsxs("div",{className:"col-lg-6 col-md-12 col-12",children:[s.jsx("label",{htmlFor:"city",children:"City"}),s.jsx("input",{type:"text",placeholder:"",id:"city",name:"city"})]})]})})}),s.jsx("div",{className:"submit-btn-area",children:s.jsx("ul",{children:s.jsx("li",{children:s.jsx("button",{className:"theme-btn",type:"button",onClick:()=>i("payment"),children:"Save & continue"})})})})]})]})]})}),k=()=>{const[a,d]=n.useState({address:!0,payment:!1}),r=N(l=>l.cart.id),[i,t]=n.useState([]),[o,c]=n.useState(),[e,h]=n.useState(!1),[g,v]=n.useState(!1),[x,m]=n.useState("stripe"),j=l=>{d(p=>({...p,[l]:!p[l]}))},y=async()=>{h(!0);try{const l=await A.getAddress();t(l==null?void 0:l.data)}catch(l){console.warn(l)}finally{h(!1)}};n.useEffect(()=>{y()},[]);const b=l=>{l.preventDefault(),o?console.log({cart_id:r,address_id:o}):f.warn("Please select an address")};return s.jsx("div",{className:"checkout-area section-padding",children:s.jsx("div",{className:"container",children:s.jsx("form",{children:s.jsx("div",{className:"checkout-wrap",children:s.jsxs("div",{className:"row",children:[s.jsxs("div",{className:"col-lg-8 col-12",children:[s.jsx(F,{address:i,addLoad:e,activeAccordion:a,toggleAccordion:j,isNewAdd:g,setIsNewAdd:v,setSelectedAddress:c}),s.jsx("div",{className:"caupon-wrap s3",children:s.jsx("div",{className:"payment-area",children:s.jsx("div",{className:"row",children:s.jsxs("div",{className:"col-12",children:[s.jsx("div",{className:`coupon coupon-3 ${a.payment?"accordian-border-top":" accordian-border-left "} `,onClick:()=>j("payment"),children:s.jsx("label",{id:"toggle4",children:"Payment Method"})}),a.payment&&s.jsxs("div",{className:"payment-option",children:[s.jsx("div",{className:"payment-select",children:s.jsxs("ul",{children:[s.jsxs("li",{className:"addToggle ",children:[s.jsx("input",{id:"stripe",type:"radio",checked:x==="stripe",onChange:()=>m("stripe")}),s.jsx("label",{htmlFor:"stripe",className:"ps-2 me-4 cursor-pointer",children:"Payment By Stripe"})]}),s.jsxs("li",{className:"removeToggle ",children:[s.jsx("input",{id:"cash",type:"radio",checked:x==="cash",onChange:()=>m("cash")}),s.jsx("label",{htmlFor:"cash",className:"ps-2 cursor-pointer",children:"Cash On delivery"})]})]})}),s.jsxs("div",{id:"open5",className:"payment-name active",children:[x==="stripe"&&s.jsx("ul",{children:s.jsx("li",{className:"visa  ",children:s.jsx("img",{src:"assets/img/stripe.png",alt:"",style:{maxWidth:"120px"}})})}),s.jsx("div",{className:"contact-form form-style",children:s.jsx("div",{className:"row",children:s.jsx("div",{className:"col-lg-12 col-md-12 col-12",children:s.jsx("div",{className:"submit-btn-area text-center",children:s.jsx("button",{className:"theme-btn",type:"submit",onClick:l=>b(l),children:"Place Order"})})})})})]})]})]})})})})]}),s.jsx(C,{})]})})})})})};export{k as default};
