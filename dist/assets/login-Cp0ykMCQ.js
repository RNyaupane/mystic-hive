import{b as v,r as y,c as k,d as L,j as e,L as l,C as x,I as p,o as S,g as E,y as n,l as P,e as C,f as g}from"./index-CvIzpCtl.js";const T="820485442251-bc8o1ll8q7eucm2ru3edgbaer05msvgb.apps.googleusercontent.com",_="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",F=C().shape({email:g().email("Invalid email format").required("Email is required"),password:g().required("Password is required")}),G=()=>{const i=v(),[c,u]=y.useState(!1),j=()=>{u(!c)},{control:t,handleSubmit:b,formState:{errors:a,isSubmitting:d}}=k({resolver:S(F)}),N=L({onSuccess:async s=>{var r;console.log("Authorization Code:",s);try{const h=await(await fetch("https://oauth2.googleapis.com/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({code:s.code,client_id:T,client_secret:_,redirect_uri:"http://localhost:5173",grant_type:"authorization_code"})})).json();console.log("Tokens:",h);const{id_token:f,access_token:I}=h,o=await i(E({auth_token:f})).unwrap();n.success(((r=o==null?void 0:o.message)==null?void 0:r[0])||(o==null?void 0:o.message)||"Login Successful")}catch(m){console.error("Token Exchange Error:",m),n.error("Google login failed")}},onError:s=>{console.error("Google Login Error:",s),n.error("Google Login Failed")},scope:"openid email profile",flow:"auth-code",responseType:"code"}),w=async s=>{try{await i(P(s))}catch(r){console.error("Error during login:",r)}};return e.jsx("div",{className:"tp-login-area",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-lg-12",children:e.jsxs("form",{className:"tp-accountWrapper",onSubmit:b(w),children:[e.jsxs("div",{className:"tp-accountInfo",children:[e.jsx("div",{className:"tp-accountInfoHeader",children:e.jsx(l,{to:"/",children:e.jsx("img",{src:"/assets/img/logo.png",alt:"Logo"})})}),e.jsx("div",{className:"back-home",children:e.jsx(l,{className:"tp-accountBtn",to:"/",children:"Back To Home"})})]}),e.jsxs("div",{className:"tp-accountForm form-style",children:[e.jsxs("div",{className:"fromTitle",children:[e.jsx("h2",{children:"Login"}),e.jsx("p",{children:"Sign into your account"})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-12",children:e.jsx(x,{name:"email",control:t,defaultValue:"",render:({field:s})=>e.jsxs("div",{className:"form-group mb-4",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"text",id:"email",...s,placeholder:"Enter email",className:`form-control ${a.email?"is-invalid":""}`}),a.email&&e.jsx("div",{className:"invalid-feedback",children:a.email.message})]})})}),e.jsx("div",{className:"col-lg-12",children:e.jsx(x,{name:"password",control:t,defaultValue:"",render:({field:s})=>e.jsxs("div",{className:"form-group mb-4",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"input-group align-items-center",style:{flexWrap:"nowrap"},children:[e.jsx("input",{type:c?"text":"password",id:"password",...s,placeholder:"Enter your password",className:`form-control ${a.password?"is-invalid":""}`}),e.jsx("div",{className:"cursor-pointer",style:{position:"absolute",right:"10px",zIndex:"99"},onClick:j,children:c?e.jsx(p,{icon:"fa6-regular:eye",className:"text-secondary"}):e.jsx(p,{icon:"fa6-regular:eye-slash",className:"text-secondary"})})]}),a.password&&e.jsx("div",{className:"invalid-feedback",children:a.password.message})]})})}),e.jsx("div",{className:"col-lg-12",children:e.jsxs("div",{className:"check-box-wrap",children:[e.jsxs("div",{className:"input-box",children:[e.jsx("input",{type:"checkbox",id:"rememberMe",name:"rememberMe"}),e.jsx("label",{htmlFor:"rememberMe",children:"Remember Me"})]}),e.jsx("div",{className:"forget-btn",children:e.jsx(l,{to:"/auth/forgot-password",children:"Forgot Password?"})})]})}),e.jsx("div",{className:"col-lg-12",children:e.jsx("button",{type:"submit",className:"tp-accountBtn",disabled:d,children:d?e.jsx("span",{className:"spinner-border spinner-border-sm mx-2",role:"status"}):"Login"})})]}),e.jsx("h4",{className:"or",children:e.jsx("span",{children:"OR"})}),e.jsx("ul",{className:"tp-socialLoginBtn",children:e.jsx("li",{children:e.jsx("button",{className:"w-auto px-3 btn btn-secondary",type:"button",onClick:N,children:e.jsxs("span",{children:[e.jsx("i",{className:"fa fa-google"})," â€‚ Login with Google"]})})})}),e.jsxs("p",{className:"subText mt-1",children:["Don't have an account?"," ",e.jsx(l,{to:"/auth/register",children:"Create free account"})]})]})]})})})})})};export{G as default};
